{"id":71,"date":"2017-02-10T14:56:11","date_gmt":"2017-02-10T14:56:11","guid":{"rendered":"https:\/\/help.perfexcrm.com\/?p=71"},"modified":"2019-03-16T19:09:54","modified_gmt":"2019-03-16T19:09:54","slug":"nginx-config","status":"publish","type":"post","link":"https:\/\/help.perfexcrm.com\/nginx-config\/","title":{"rendered":"NGINX Config"},"content":{"rendered":"\n<p>Use the following configuration if you are installing on NGINX.<br>In the sample code config, there are some variables that you need to change manually based on your server.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\">Advanced Config<\/h3>\n\n\n\n<pre class=\"wp-block-code\"><code>server {\n        listen Your_IP_ADDRESS_HERE:443 http2;\n        # If you don't have http2 support, delete http2 here\n            server_name domain.com http:\/\/www.domain.com;\n            root \/var\/www\/domain.com\/;\n            index index.php index.html index.htm;\n            access_log \/var\/log\/nginx\/domains\/domain.com.log combined;\n            error_log \/var\/log\/nginx\/domains\/domain.com.error.log error;\n            add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\" always;\n            add_header X-Frame-Options SAMEORIGIN;\n            add_header X-Content-Type-Options nosniff;\n            add_header X-XSS-Protection \"1; mode=block\";\n\n        # If you dont want SSL, please remove ssl section below and add :80 instead of :443 on top server definition \n            ssl on;\n            ssl_certificate \/path\/to\/ssl.pem;\n            ssl_certificate_key \/path\/to\/ssl.key;\n            ssl_session_timeout 5m;\n\n        # To generate the following DHPARAM.PEM file, run first the following command on the server:\n        # openssl dhparam -out \/etc\/ssl\/certs\/dhparam.pem 2048\n        # Il will take at least 20 minutes!\n        # If you don't want it, comment the following line \n\n            ssl_dhparam \/etc\/ssl\/certs\/dhparam.pem; \n\n            ssl_prefer_server_ciphers on;\n            resolver 8.8.8.8;\n            ssl_stapling on;\n            ssl_trusted_certificate \/path\/to\/ssl.pem;\n            # same certificate as up\n\n\n        location \/ {\n            try_files $uri $uri\/ \/index.php?\/$request_uri;\n            add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\" always;\n            add_header X-Frame-Options SAMEORIGIN;\n            add_header X-Content-Type-Options nosniff;\n            add_header X-XSS-Protection \"1; mode=block\";\n\n            location ~* ^.+\\.(jpeg|jpg|png|gif|bmp|ico|svg|css|js)$ {\n            expires max;\n        }\n\n        location ~ [^\/]\\.php(\/|$) {\n            add_header Strict-Transport-Security \"max-age=31536000; includeSubdomains\" always;\n            add_header X-Frame-Options SAMEORIGIN;\n            add_header X-Content-Type-Options nosniff;\n            add_header X-XSS-Protection \"1; mode=block\";\n            fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n            if (!-f $document_root$fastcgi_script_name) {\n            return 404;\n        }\n            fastcgi_read_timeout 300;\n            fastcgi_pass 127.0.0.1:9002;\n            fastcgi_index index.php;\n            include \/etc\/nginx\/fastcgi_params;\n            # modify this path if OS flavor different than Ubuntu\/Debian\n        }\n        \n        location \/backups {\n\t\t    deny all;\n\t\t    return 404;\n        }\n\n        # Optional, disallow access to this directories and folders\n        location ~* \"\/\\.(htaccess|htpasswd|git|svn)$\" {\n            deny all;\n            return 404;\n        }\n    }\n}<\/code><\/pre>\n\n\n\n<h3 class=\"wp-block-heading\">Simple Config<\/h3>\n\n\n\n<pre class=\"wp-block-code\"><code>server {\n        server_name yourdomain.com www.yourdomain.com;\n\n        root \/path\/to\/your\/website.com\/;\n        index index.html index.php;\n\n        # set expiration of assets to MAX for caching\n        location ~* \\.(ico|css|js|gif|jpe?g|png)(\\?[0-9]+)?$ {\n                expires max;\n                log_not_found off;\n        }\n\n        location \/ {\n                # Check if a file or directory index file exists, else route it to index.php.\n                try_files $uri $uri\/ \/index.php;\n        }\n        \n        location \/backups {\n                deny all;\n                return 404;\n        }\n\n        location ~* \\.php$ {\n                fastcgi_pass 127.0.0.1:9000;\n                include fastcgi.conf;\n        }\n}<\/code><\/pre>\n","protected":false},"excerpt":{"rendered":"<p>Use the following configuration if you are installing on NGINX.In the sample code config, there are some variables that you need to change manually based on your server. Advanced Config Simple Config<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[26,29],"tags":[],"class_list":["post-71","post","type-post","status-publish","format-standard","hentry","category-general-informations","category-installation"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/71","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/comments?post=71"}],"version-history":[{"count":0,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/71\/revisions"}],"wp:attachment":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/media?parent=71"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/categories?post=71"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/tags?post=71"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}