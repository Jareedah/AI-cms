{"id":4097,"date":"2019-03-24T18:02:10","date_gmt":"2019-03-24T18:02:10","guid":{"rendered":"https:\/\/help.perfexcrm.com\/?p=4097"},"modified":"2019-03-26T12:59:38","modified_gmt":"2019-03-26T12:59:38","slug":"module-controllers","status":"publish","type":"post","link":"https:\/\/help.perfexcrm.com\/module-controllers\/","title":{"rendered":"Module Controllers"},"content":{"rendered":"\n<p>Perfex CRM uses the Codeigniter <a href=\"https:\/\/www.codeigniter.com\/userguide3\/general\/controllers.html\">controllers <\/a>feature for handling HTTP requests and output content to <g class=\"gr_ gr_51 gr-alert gr_gramm gr_inline_cards gr_run_anim Punctuation only-del replaceWithoutSep\" id=\"51\" data-gr-id=\"51\">the u<\/g>ser, the modules are using the same feature to handle HTTP requests and output content to the end user.<\/p>\n\n\n\n<p>To create a controller for your module, you must create a folder named <strong>controllers <\/strong>in your module directory (<strong>module_name\/controllers<\/strong>)<\/p>\n\n\n\n<p>After you create the folder, create a file name with starting an uppercase letter, for example, <strong>Sample_module.php<\/strong> and add the following content:<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>&lt;?php\n\ndefined('BASEPATH') or exit('No direct script access allowed');\n\nclass Sample_module extends AdminController\n{\n   \n}<\/code><\/pre>\n\n\n\n<p>If your controller is not intended to be accessed via the admin area, make sure that the controller\/class extends the <strong>ClientsController <\/strong>or&nbsp;<strong>App_Controller<\/strong> instead&nbsp;of&nbsp;the <strong>AdminController<\/strong><\/p>\n\n\n\n<p>When the controller will extend the <strong>AdminController <\/strong>Perfex CRM will check whether the user is logged in as a staff member and if not, will not allow any data to be outputted to this user and will redirect to the admin login area.<\/p>\n\n\n\n<div class=\"st-alert st-alert- \">Make sure that your controller names\/files are unique to prevent any conflicts with the core controllers or other modules.<\/div>\n\n\n\n<h4 class=\"wp-block-heading\"><strong>Require valid contact (since 2.3.3).<\/strong><\/h4>\n\n\n\n<p>If you extend the <strong>ClientsController <\/strong>and you want the controller to be accessed <strong>only by logged in and contacts with confirmed email address contacts<\/strong>, you can use our <strong>trait<\/strong>, the trait will check this for you and will perform necessary actions.<\/p>\n\n\n\n<pre class=\"wp-block-code\"><code>&lt;?php\n\ndefined('BASEPATH') or exit('No direct script access allowed');\n\nuse app\\services\\ValidatesContact;\n\nclass Sample_module extends ClientsController\n{\n   use ValidatesContact;\n\n   public function my_methhod()\n   {\n       \/\/ Won't work if there is no contact logged in and the contact email address is not confirmed.\n   }\n}<\/code><\/pre>\n\n\n\n<h3 class=\"wp-block-heading\">Loading Views<\/h3>\n\n\n\n<p>Check the <a href=\"https:\/\/help.perfexcrm.com\/module-views\/\">views<\/a> section guide to get more familiar how to load views e.q. when extending the <strong>ClientsController <\/strong>or <strong>AdminController<\/strong>.<\/p>\n\n\n\n<h3 class=\"wp-block-heading\"><strong>Accessing the controller<\/strong> <\/h3>\n\n\n\n<p>If you are not familiar with how Codeigniter controllers work, please visit the <a href=\"https:\/\/www.codeigniter.com\/userguide3\/general\/controllers.html\">documentation <\/a>to get more familiar.<\/p>\n\n\n\n<p>After you create the controller you will be able to access the controller as:<\/p>\n\n\n\n<ul class=\"wp-block-list\"><li>crm-installation-url.com\/<strong>[module_name]<\/strong>\/sample_module\/<strong>[method]<\/strong><\/li><li>crm-installation-url.com\/<strong>sample_module\/[method]<\/strong> &#8211; (if the controller name is the same as your module name you won&#8217;t need to prepend the module name in the URL)<\/li><li>crm-installation-url.com\/admin<strong>\/[module_name<\/strong>]\/sample_module\/<strong>[ <br>method ]&nbsp;<\/strong>&#8211; if you are using the controller for the admin area, in this case, make sure that the controller extends the <strong>AdminController <\/strong>class.<\/li><\/ul>\n","protected":false},"excerpt":{"rendered":"<p>Perfex CRM uses the Codeigniter controllers feature for handling HTTP requests and output content to the user, the modules are using the same feature to handle HTTP requests and output content to the end user. To create a controller for your module, you must create a folder named controllers in your module directory (module_name\/controllers) After [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[54],"tags":[],"class_list":["post-4097","post","type-post","status-publish","format-standard","hentry","category-modules"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/4097","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/comments?post=4097"}],"version-history":[{"count":0,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/4097\/revisions"}],"wp:attachment":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/media?parent=4097"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/categories?post=4097"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/tags?post=4097"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}