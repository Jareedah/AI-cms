{"id":2335,"date":"2017-11-10T11:23:18","date_gmt":"2017-11-10T11:23:18","guid":{"rendered":"https:\/\/help.perfexcrm.com\/?p=2335"},"modified":"2020-09-24T13:21:22","modified_gmt":"2020-09-24T13:21:22","slug":"setup-ticket-form","status":"publish","type":"post","link":"https:\/\/help.perfexcrm.com\/setup-ticket-form\/","title":{"rendered":"Setup Ticket Form"},"content":{"rendered":"\n<p>Embeddable ticket form in Perfex CRM is a predefined form for tickets <strong>added in version 1.8.0<\/strong> which you can add to your websites with an iframe and when a user submits the form the ticket will automatically open a ticket in the system. You can use this form eq for a way your customers to contact you or offer support via this form on multiple websites.<\/p>\n\n\n\n<p><strong>Imagine you have 5 websites<\/strong>, you can embed the form in all 5 websites and in this case all the form submits will be created as a ticket in your Perfex&nbsp;CRM installation, in this case all your staff members\/sales agents will be able to view the requests send and take appropriate actions in no time.&nbsp;<strong>If the email field in the ticket form already exists as a contact in Perfex&nbsp;CRM under specific customer, the system will auto add this ticket to this contact.<\/strong><\/p>\n\n\n\n<p>You can even add <strong>custom fields<\/strong> in the form, in <strong>Setup-&gt;Custom Fields<\/strong> if you create a custom field that belongs to tickets, a new checkbox will be shown at the bottom Show on ticket form, tick this checkbox if you want this custom field to be shown on the ticket form.<\/p>\n\n\n\n<p>The form URL can be found at <strong>Setup-&gt;Settings-&gt;Support-&gt;Ticket Form.<\/strong><\/p>\n\n\n\n<p>The system will automatically show you a sample iframe embeddable code which you can copy and paste in your website.<\/p>\n\n\n\n<h4 class=\"wp-block-heading\">Redirect User to Custom URL After Form Submission<\/h4>\n\n\n\n<p>Via FTP\/cPanel go to <b>application\/helpers\/<\/b> and create (if don&#8217;t exists) file <b>my_functions_helper.php<\/b> and add the following code snippet:<\/p>\n\n\n\n<pre class=\"wp-block-preformatted lang:default decode:true\">add_action('ticket_form_submitted','my_ticket_form_submitted_redirect_to_custom_url');\n\nfunction my_ticket_form_submitted_redirect_to_custom_url($data){\n    echo json_encode(array(\n      'success'=&gt;true,\n      'redirect_url'=&gt;'http:\/\/yourcustomurl.com'\n    ));\n    die;\n}<\/pre>\n\n\n\n<p><strong>Don&#8217;t forget to include the &lt;?<\/strong>php<strong> opening tag at the top of the file if it&#8217;s not already added.<\/strong><\/p>\n\n\n\n<h4 class=\"wp-block-heading\">Styling<\/h4>\n\n\n\n<p>If you need to style the color of the input fields to fit with your website you can create<strong> custom.css<\/strong> file in assets\/css and apply the necessary styles.<\/p>\n\n\n\n<p>Example<strong> changing inputs border color:<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-preformatted lang:css decode:true\">body.ticket_form input {\nborder-color:red;\n}<\/pre>\n\n\n\n<p>Example <strong>changing submit button<\/strong>&nbsp;<strong>background color:<\/strong><\/p>\n\n\n\n<pre class=\"wp-block-preformatted lang:default decode:true\">body.ticket_form #form_submit {\nbackground:red;\n}\n\nbody.ticket_form #form_submit:hover,\nbody.ticket_form #form_submit:active {\nbackground:green;\n}<\/pre>\n\n\n\n<h4 class=\"wp-block-heading\">Passing department ID in URL (from v2.1.1)<\/h4>\n\n\n\n<p>If you are using the ticket form to a multiple URL&#8217;s where on each URL you need to send the ticket to a different department without the user that is filling the form knowing this, you can pass parameter in the ticket form URL to achieve this.<\/p>\n\n\n\n<p>For example, let&#8217;s assume you have 2 different departments <strong>Billing<\/strong> and <strong>Technical Questions <\/strong>and the ticket form is placed on different landing pages or sections on your website corresponding to the department and you want each time the user fills the form e.q. on <strong>Billing<\/strong> landing page or section the ticket to go straight into the Billing department without the user knowing this.<\/p>\n\n\n\n<p><strong>The first step you need to make is to get the department ID in<\/strong> <strong>Setup-&gt;Support-&gt;Departments<\/strong>, on the table first column you will be able to see the department ID, for this example let&#8217;s assume that your Billing department has ID with number 1.<\/p>\n\n\n\n<p>After you get the department ID, you should modify your ticket form URL to https:\/\/your-crm-installation.com\/forms\/ticket?<strong>department_id=1<\/strong><\/p>\n\n\n\n<p>If you visit the URL you will be able to see that the department field is hidden but the Billing department will be pre-selected and the ticket will go straight to the Billing department.<\/p>\n\n\n\n<p>You can repeat this step for an unlimited number of departments, you will only need to change the department ID parameter.<\/p>\n\n\n\n<h4 class=\"wp-block-heading\">Add custom form HTML, Eq. logo<\/h4>\n\n\n\n<p>In application\/helpers create a file (if don&#8217;t exists) and add the following code:<\/p>\n\n\n\n<pre class=\"wp-block-preformatted lang:default decode:true\">hooks()->add_action('ticket_form_start','my_ticket_form_start');\nfunction my_ticket_form_start(){\n    echo '&lt;img src=\"https:\/\/yourwebsite.com\/logo.jpg\">';\n}<\/pre>\n\n\n\n<p><strong>Don&#8217;t forget to include the &lt;?<\/strong>php<strong> opening tag at the top of the file if it&#8217;s not already added.<\/strong><\/p>\n\n\n\n<p>Keep in mind that you will need to change the logo URL.<\/p>\n\n\n\n<p><strong>When placing the iframe snippet code there are few things you need to consider.<\/strong><\/p>\n\n\n\n<ol class=\"wp-block-list\"><li>If the protocol of your Perfex CRM installation is HTTP then use a HTTP page inside the iframe.<\/li><li>If the protocol of your Perfex CRM installation is https than use an https page inside the iframe.<\/li><li>Summarized will be <strong>no SSL Perfex CRM installation will need to place the link in no SSL<\/strong> eq landing page and backward, SSL websites with SSL Perfex CRM&nbsp;installation and no SSL website with none SSL Perfex CRM installation. You can read more about this&nbsp;<a href=\"http:\/\/www.tinywebgallery.com\/blog\/iframe-do-not-mix-http-and-https\" target=\"_blank\" rel=\"noopener noreferrer\">here<\/a><\/li><\/ol>\n","protected":false},"excerpt":{"rendered":"<p>Embeddable ticket form in Perfex CRM is a predefined form for tickets added in version 1.8.0 which you can add to your websites with an iframe and when a user submits the form the ticket will automatically open a ticket in the system. You can use this form eq for a way your customers to [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"footnotes":""},"categories":[31,12],"tags":[],"class_list":["post-2335","post","type-post","status-publish","format-standard","hentry","category-setup-and-configuration","category-support-tickets"],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/2335","targetHints":{"allow":["GET"]}}],"collection":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/comments?post=2335"}],"version-history":[{"count":0,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/posts\/2335\/revisions"}],"wp:attachment":[{"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/media?parent=2335"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/categories?post=2335"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/help.perfexcrm.com\/wp-json\/wp\/v2\/tags?post=2335"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}